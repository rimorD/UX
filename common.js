const translations = {
  es: {
    pageTitle: "UO250757 | Página Personal",
    navHome: "Inicio",
    navHobbies: "Aficiones",
    navExperience: "Experiencia",
    navContact: "Contacto",
    intro: "¡Hola! Permíteme que me presente",
    copyright: "© Diciembre 2025 David Ferreiro Fernández",
    searchPlaceholder: "Buscar...",
    contactTitle: "Hablemos",
    contactSubtitle:
      "Estoy disponible para nuevos proyectos y colaboraciones. Envíame un mensaje.",
    contactSendEmail: "Envíame un correo",
    contactLocation: "Gijón, Asturias",

    socialGithub: "GitHub",
    socialLinkedin: "LinkedIn",
    socialInstagram: "Instagram",

    testimonialsTitle: "Lo que dicen de mí",
    testimonialsSubtitle:
      "Testimonios de colaboradores con los que he tenido el placer de trabajar.",

    testimonial1Quote:
      "“Trabajar con David fue una experiencia gratificante. Su profesionalismo, atención al detalle y capacidad para resolver problemas complejos superaron nuestras expectativas.”",
    testimonial1Name: "Carlos Martínez",
    testimonial1Role: "Product Manager",

    testimonial2Quote:
      "“La dedicación y la calidad del trabajo de David son excepcionales. Aportó una perspectiva fresca y soluciones innovadoras que impulsaron nuestro proyecto hacia el éxito.”",
    testimonial2Name: "Cristina Megido",
    testimonial2Role: "CTO en NovaTech",

    testimonial3Quote:
      "“Profesionalidad y dedicación de principio a fin. Resultados impecables.”",
    testimonial3Name: "Miguel Rueda",
    testimonial3Role: "CEO en RuedaSoft",

    myHobbies: "Mis aficiones",
    hobbiesGames: "Videojuegos",
    falloutTitle: "Fallout: New Vegas",
    falloutGenre: "RPG apocalíptico",
    satisfactoryTitle: "Satisfactory",
    satisfactoryGenre: "Automatización y exploración",
    yakuzaTitle: "Like a Dragon",
    yakuzaGenre: "Acción y aventura",
    gamesDescription:
      "Me sumerjo en mundos interactivos donde la narrativa y la jugabilidad se entrelazan para crear experiencias inolvidables.",
    hobbiesSeries: "Series",
    b99Title: "Brooklyn 99",
    b99Genre: "Comedia policial",
    himymTitle: "Cómo conocí a vuestra madre",
    himymGenre: "Comedia romántica",
    jojoTitle: "Jojo's Bizarre Adventure",
    jojoGenre: "Acción, aventura",
    onepieceTitle: "One Piece",
    onepieceGenre: "Aventura, fantasía",
    seriesDescription:
      "Disfruto de historias apasionantes, ya sean dramas intensos, animación visualmente impactante o comedias que me hacen reír a carcajadas.",
    hobbiesBooks: "Libros",
    mistbornTitle: "Nacidos de la bruma",
    mistbornGenre: "Fantasía épica",
    witcherTitle: "The Witcher",
    witcherGenre: "Fantasía oscura",
    booksDescription:
      "Me pierdo en las páginas de libros que me transportan a otros universos, desde la ciencia ficción hasta la fantasía épica y la distopía reflexiva.",
    hobbiesMovies: "Películas",
    bttfTitle: "Regreso al futuro",
    bttfGenre: "Ciencia ficción",
    fnfTitle: "Fast and Furious",
    fnfGenre: "Carreras y acción",
    grantorinoTitle: "Gran Torino",
    grantorinoGenre: "Drama",
    moviesDescription:
      "Las películas que más disfruto mezclan emoción, personajes memorables y mundos que invitan a reflexionar o simplemente entretenerme.",
    hobbiesMusic: "Música",
    sum41Title: "Sum 41",
    sum41Genre: "Punk rock, pop punk",
    offspringTitle: "The Offspring",
    offspringGenre: "Punk rock, rock alternativo",
    powerwolfTitle: "Powerwolf",
    powerwolfGenre: "Power metal, metal sinfónico",
    musicDescription:
      "La música que escucho abarca energía, melodías pegadizas y letras que me inspiran, desde punk y rock hasta metal potente y teatral.",
    title_experience: "Experiencia Profesional",
    desc_experience:
      "Un breve resumen de mi carrera profesional y mis capacidades técnicas.",
    master_title: "Máster en Ingeniería Web",
    master_institution: "Universidad de Oviedo | 2025 - Presente",
    master_desc:
      "Estoy cursando el máster en Ingeniería Web de la Universidad de Oviedo, en la Escuela de Ingeniería Informática.",
    mobile_lead_title: "Responsable de Producto Mobile",
    mobile_lead_company: "Prodity Software S.L.U. | 2022 - Presente",
    mobile_lead_1: "Asumí la responsabilidad principal de la aplicación móvil",
    mobile_lead_2:
      "Analicé, diseñé e implementé mejoras y cambios clave solicitados por los clientes",
    mobile_lead_3:
      "Lideré proyectos de rediseño visual, optimizando pantallas y flujos esenciales de la app",
    mobile_lead_4:
      "Actualmente desarrollo una nueva aplicación móvil, reemplazando la anterior con un stack moderno basado en React Native",
    fullstack_title: "Desarrollador Full Stack",
    fullstack_company: "Prodity Software S.L.U. | 2019 - 2022",
    fullstack_1:
      "Inicié mi carrera trabajando en una aplicación legacy desarrollada con ASP.NET Framework 4.8",
    fullstack_2:
      "Amplié mi experiencia en desarrollo backend y en la creación de aplicaciones web",
    fullstack_3:
      "Fortalecí mis habilidades en gestión de proyectos, trabajo en equipo y aplicación de metodologías ágiles",
    bachelor_title: "Graduado en Ingeniería de Software",
    bachelor_institution: "Universidad de Oviedo | 2015 - 2020",
    bachelor_desc:
      "Estudié el Grado en Ingeniería de Software de la Universidad de Oviedo, en la Escuela de Ingeniería Informática.",
    skills_title: "Habilidades",
    skill_fullstack: "Full stack",
    skill_frontmobile: "Frontend móvil",
    skill_uiux: "Diseño de Interfaz",
    skill_performance: "Optimización y rendimiento",
    skill_api: "Integración con APIs",
    skill_teamwork: "Trabajo en equipo y metodologías ágiles",
    tech_title: "Tecnologías",
  },
  en: {
    pageTitle: "UO250757 | Personal Page",
    navHome: "Home",
    navHobbies: "Hobbies",
    navExperience: "Experience",
    navContact: "Contact",
    intro: "Hi! Let me introduce myself",
    copyright: "© December 2025 David Ferreiro Fernández",
    searchPlaceholder: "Search...",
    contactTitle: "Let's Talk",
    contactSubtitle:
      "I am available for new projects and collaborations. Send me a message.",
    contactSendEmail: "Send me an email",
    contactLocation: "Gijón, Asturias",

    socialGithub: "GitHub",
    socialLinkedin: "LinkedIn",
    socialInstagram: "Instagram",

    testimonialsTitle: "What People Say About Me",
    testimonialsSubtitle:
      "Testimonials from collaborators I've had the pleasure to work with.",

    testimonial1Quote:
      "“Working with David was a rewarding experience. His professionalism, attention to detail, and ability to solve complex problems exceeded our expectations.”",
    testimonial1Name: "Carlos Martínez",
    testimonial1Role: "Product Manager",

    testimonial2Quote:
      "“David's dedication and quality of work are exceptional. He brought fresh perspectives and innovative solutions that drove our project to success.”",
    testimonial2Name: "Cristina Megido",
    testimonial2Role: "CTO at NovaTech",

    testimonial3Quote:
      "“Professionalism and dedication from start to finish. Impeccable results.”",
    testimonial3Name: "Miguel Rueda",
    testimonial3Role: "CEO at RuedaSoft",
    myHobbies: "My Hobbies",
    hobbiesGames: "Videogames",
    falloutTitle: "Fallout: New Vegas",
    falloutGenre: "Apocalyptic RPG",
    satisfactoryTitle: "Satisfactory",
    satisfactoryGenre: "Automation and exploration",
    yakuzaTitle: "Like a Dragon",
    yakuzaGenre: "Action and adventure",
    gamesDescription:
      "I dive into interactive worlds where narrative and gameplay blend together to create unforgettable experiences.",
    hobbiesSeries: "TV Shows",
    b99Title: "Brooklyn 99",
    b99Genre: "Police comedy",
    himymTitle: "How I Met Your Mother",
    himymGenre: "Romantic comedy",
    jojoTitle: "Jojo's Bizarre Adventure",
    jojoGenre: "Action, adventure",
    onepieceTitle: "One Piece",
    onepieceGenre: "Adventure, fantasy",
    seriesDescription:
      "I enjoy captivating stories, whether intense dramas, striking animation, or comedies that make me laugh out loud.",
    hobbiesBooks: "Books",
    mistbornTitle: "Mistborn",
    mistbornGenre: "Epic fantasy",
    witcherTitle: "The Witcher",
    witcherGenre: "Dark fantasy",
    booksDescription:
      "I get lost in books that transport me to other universes, from science fiction to epic fantasy and reflective dystopia.",
    hobbiesMovies: "Movies",
    bttfTitle: "Back to the Future",
    bttfGenre: "Science fiction",
    fnfTitle: "Fast and Furious",
    fnfGenre: "Racing and action",
    grantorinoTitle: "Gran Torino",
    grantorinoGenre: "Drama",
    moviesDescription:
      "The movies I enjoy the most combine emotion, memorable characters, and worlds that invite reflection or simply entertain.",
    hobbiesMusic: "Music",
    sum41Title: "Sum 41",
    sum41Genre: "Punk rock, pop punk",
    offspringTitle: "The Offspring",
    offspringGenre: "Punk rock, alternative rock",
    powerwolfTitle: "Powerwolf",
    powerwolfGenre: "Power metal, symphonic metal",
    musicDescription:
      "The music I listen to encompasses energy, catchy melodies, and inspiring lyrics, from punk and rock to powerful and theatrical metal.",
    title_experience: "Professional Experience",
    desc_experience:
      "A brief summary of my professional career and technical skills.",
    master_title: "Master in Web Engineering",
    master_institution: "University of Oviedo | 2025 - Present",
    master_desc:
      "I am pursuing a Master in Web Engineering at the University of Oviedo, School of Computer Engineering.",
    mobile_lead_title: "Mobile Product Lead",
    mobile_lead_company: "Prodity Software S.L.U. | 2022 - Present",
    mobile_lead_1: "Assumed primary responsibility for the mobile application",
    mobile_lead_2:
      "Analyzed, designed, and implemented key improvements and changes requested by clients",
    mobile_lead_3:
      "Led visual redesign projects, optimizing screens and essential app flows",
    mobile_lead_4:
      "Currently developing a new mobile app, replacing the old one with a modern React Native stack",
    fullstack_title: "Full Stack Developer",
    fullstack_company: "Prodity Software S.L.U. | 2019 - 2022",
    fullstack_1:
      "Started my career working on a legacy application developed with ASP.NET Framework 4.8",
    fullstack_2:
      "Expanded my experience in backend development and web applications",
    fullstack_3:
      "Strengthened skills in project management, teamwork, and agile methodologies",
    bachelor_title: "Bachelor in Software Engineering",
    bachelor_institution: "University of Oviedo | 2015 - 2020",
    bachelor_desc:
      "Studied the Bachelor in Software Engineering at the University of Oviedo, School of Computer Engineering.",
    skills_title: "Skills",
    skill_fullstack: "Full stack",
    skill_frontmobile: "Mobile frontend",
    skill_uiux: "UI/UX design",
    skill_performance: "Optimization & performance",
    skill_api: "API integration",
    skill_teamwork: "Teamwork & agile methodologies",
    tech_title: "Technologies",
  },
  ca: {
    pageTitle: "UO250757 | Pàgina Personal",
    navHome: "Inici",
    navHobbies: "Aficions",
    navExperience: "Experiència",
    navContact: "Contacte",
    intro: "Hola! Permet-me que em presenti",
    copyright: "© Desembre 2025 David Ferreiro Fernández",
    searchPlaceholder: "Cercar...",
    contactTitle: "Parlem",
    contactSubtitle:
      "Estic disponible per a nous projectes i col·laboracions. Envia'm un missatge.",
    contactSendEmail: "Envia'm un correu",
    contactLocation: "Gijón, Astúries",

    socialGithub: "GitHub",
    socialLinkedin: "LinkedIn",
    socialInstagram: "Instagram",

    testimonialsTitle: "El que diuen de mi",
    testimonialsSubtitle:
      "Testimonis de col·laboradors amb qui he tingut el plaer de treballar.",

    testimonial1Quote:
      "“Treballar amb en David va ser una experiència gratificant. El seu professionalisme, atenció al detall i capacitat per resoldre problemes complexos van superar les nostres expectatives.”",
    testimonial1Name: "Carlos Martínez",
    testimonial1Role: "Product Manager",

    testimonial2Quote:
      "“La dedicació i la qualitat de la feina d’en David són excepcionals. Va aportar una perspectiva nova i solucions innovadores que van impulsar el nostre projecte cap a l'èxit.”",
    testimonial2Name: "Cristina Megido",
    testimonial2Role: "CTO a NovaTech",

    testimonial3Quote:
      "“Professionalitat i dedicació de principi a fi. Resultats impecables.”",
    testimonial3Name: "Miguel Rueda",
    testimonial3Role: "CEO a RuedaSoft",
    myHobbies: "Les Meves Aficions",
    hobbiesGames: "Videojocs",
    falloutTitle: "Fallout: New Vegas",
    falloutGenre: "RPG Apocalíptic",
    satisfactoryTitle: "Satisfactory",
    satisfactoryGenre: "Automatització i exploració",
    yakuzaTitle: "Like a Dragon",
    yakuzaGenre: "Acció i aventura",
    gamesDescription:
      "Em submergeixo en mons interactius on la narrativa i la jugabilitat es fusionen per crear experiències inoblidables.",
    hobbiesSeries: "Sèries de TV",
    b99Title: "Brooklyn 99",
    b99Genre: "Comèdia policíaca",
    himymTitle: "How I Met Your Mother",
    himymGenre: "Comèdia romàntica",
    jojoTitle: "L'Aventura Bizarre de Jojo",
    jojoGenre: "Acció, aventura",
    onepieceTitle: "One Piece",
    onepieceGenre: "Aventura, fantasia",
    seriesDescription:
      "Gaudeixo d'històries captivadores, ja siguin drames intensos, animacions sorprenents o comèdies que em fan riure sense parar.",
    hobbiesBooks: "Llibres",
    mistbornTitle: "Nascuts de la Boira (Mistborn)",
    mistbornGenre: "Fantasia èpica",
    witcherTitle: "The Witcher",
    witcherGenre: "Fantasia fosca",
    booksDescription:
      "Em perdo en llibres que em transporten a altres universos, des de la ciència-ficció a la fantasia èpica i la distopia reflexiva.",
    hobbiesMovies: "Pel·lícules",
    bttfTitle: "Retorn al Futur (Back to the Future)",
    bttfGenre: "Ciència-ficció",
    fnfTitle: "Fast and Furious",
    fnfGenre: "Carreres i acció",
    grantorinoTitle: "Gran Torino",
    grantorinoGenre: "Drama",
    moviesDescription:
      "Les pel·lícules que més gaudeixo combinen emoció, personatges memorables i mons que conviden a la reflexió o simplement entretenen.",
    hobbiesMusic: "Música",
    sum41Title: "Sum 41",
    sum41Genre: "Punk rock, pop punk",
    offspringTitle: "The Offspring",
    offspringGenre: "Punk rock, rock alternatiu",
    powerwolfTitle: "Powerwolf",
    powerwolfGenre: "Power metal, metall simfònic",
    musicDescription:
      "La música que escolto engloba energia, melodies enganxoses i lletres inspiradores, des del punk i el rock fins al metall potent i teatral.",
    title_experience: "Experiència Professional",
    desc_experience:
      "Un breu resum de la meva trajectòria professional i les meves competències tècniques.",
    master_title: "Màster en Enginyeria Web",
    master_institution: "Universitat d'Oviedo | 2025 - Present",
    master_desc:
      "Estic cursant el màster en Enginyeria Web a la Universitat d'Oviedo, a l'Escola d'Enginyeria Informàtica.",
    mobile_lead_title: "Responsable de Producte Mobile",
    mobile_lead_company: "Prodity Software S.L.U. | 2022 - Present",
    mobile_lead_1:
      "Vaig assumir la responsabilitat principal de l'aplicació mòbil",
    mobile_lead_2:
      "Vaig analitzar, dissenyar i implementar millores i canvis clau sol·licitats pels clients",
    mobile_lead_3:
      "Vaig liderar projectes de redisseny visual, optimitzant pantalles i fluxos essencials de l'app",
    mobile_lead_4:
      "Actualment desenvolup una nova aplicació mòbil, reemplaçant l'antiga amb un stack modern basat en React Native",
    fullstack_title: "Desenvolupador Full Stack",
    fullstack_company: "Prodity Software S.L.U. | 2019 - 2022",
    fullstack_1:
      "Vaig iniciar la meva carrera treballant en una aplicació legacy desenvolupada amb ASP.NET Framework 4.8",
    fullstack_2:
      "Vaig ampliar la meva experiència en desenvolupament backend i creació d'aplicacions web",
    fullstack_3:
      "Vaig reforçar les meves habilitats en gestió de projectes, treball en equip i aplicació de metodologies àgils",
    bachelor_title: "Graduat en Enginyeria de Software",
    bachelor_institution: "Universitat d'Oviedo | 2015 - 2020",
    bachelor_desc:
      "Vaig estudiar el Grau en Enginyeria de Software a la Universitat d'Oviedo, a l'Escola d'Enginyeria Informàtica.",
    skills_title: "Habilitats",
    skill_fullstack: "Full stack",
    skill_frontmobile: "Frontend mòbil",
    skill_uiux: "Disseny d'Interfície",
    skill_performance: "Optimització i rendiment",
    skill_api: "Integració amb APIs",
    skill_teamwork: "Treball en equip i metodologies àgils",
    tech_title: "Tecnologies",
  },
  zh: {
    pageTitle: "UO250757 | 个人页面",
    navHome: "首页",
    navHobbies: "爱好",
    navExperience: "经历",
    navContact: "联系方式",
    intro: "嗨！让我介绍一下自己",
    copyright: "© 2025年12月 David Ferreiro Fernández",
    searchPlaceholder: "搜索...",
    contactTitle: "联系我们",
    contactSubtitle: "我愿意参与新的项目和合作。给我发送一条消息吧。",
    contactSendEmail: "发送电子邮件",
    contactLocation: "西洪，阿斯图里亚斯",

    socialGithub: "GitHub",
    socialLinkedin: "领英",
    socialInstagram: "Instagram",

    testimonialsTitle: "人们对我的评价",
    testimonialsSubtitle: "来自我有幸合作过的同事们的推荐。",

    testimonial1Quote:
      "“与David合作是一次非常有价值的经历。他的专业精神、对细节的关注以及解决复杂问题的能力超出了我们的期望。”",
    testimonial1Name: "Carlos Martínez",
    testimonial1Role: "产品经理",

    testimonial2Quote:
      "“David的敬业精神和工作质量非常出色。他带来了全新的视角和创新的解决方案，使我们的项目取得了成功。”",
    testimonial2Name: "Cristina Megido",
    testimonial2Role: "NovaTech 首席技术官",

    testimonial3Quote: "“从头到尾都充满专业精神和敬业态度。成果无可挑剔。”",
    testimonial3Name: "Miguel Rueda",
    testimonial3Role: "RuedaSoft 首席执行官",

    myHobbies: "我的爱好",
    hobbiesGames: "电子游戏",
    falloutTitle: "辐射：新维加斯",
    falloutGenre: "末世RPG",
    satisfactoryTitle: "Satisfactory",
    satisfactoryGenre: "自动化与探索",
    yakuzaTitle: "如龙",
    yakuzaGenre: "动作与冒险",
    gamesDescription:
      "我沉浸于互动世界，在那里叙事与玩法融合，创造难忘的体验。",
    hobbiesSeries: "电视剧",
    b99Title: "布鲁克林99",
    b99Genre: "警察喜剧",
    himymTitle: "老爸老妈的浪漫史",
    himymGenre: "浪漫喜剧",
    jojoTitle: "乔乔的奇妙冒险",
    jojoGenre: "动作、冒险",
    onepieceTitle: "海贼王",
    onepieceGenre: "冒险、奇幻",
    seriesDescription:
      "我喜欢引人入胜的故事，无论是紧张的剧情、惊艳的动画，还是让我开怀大笑的喜剧。",
    hobbiesBooks: "书籍",
    mistbornTitle: "雾都风暴",
    mistbornGenre: "史诗奇幻",
    witcherTitle: "巫师",
    witcherGenre: "黑暗奇幻",
    booksDescription:
      "我沉浸在能带我进入另一个宇宙的书籍中，从科幻到史诗奇幻与发人深省的反乌托邦。",
    hobbiesMovies: "电影",
    bttfTitle: "回到未来",
    bttfGenre: "科幻",
    fnfTitle: "速度与激情",
    fnfGenre: "赛车与动作",
    grantorinoTitle: "老无所依",
    grantorinoGenre: "剧情",
    moviesDescription:
      "我最喜欢的电影结合了情感、令人难忘的角色以及引人深思或纯粹娱乐的世界。",
    hobbiesMusic: "音乐",
    sum41Title: "Sum 41",
    sum41Genre: "朋克摇滚, 流行朋克",
    offspringTitle: "The Offspring",
    offspringGenre: "朋克摇滚, 另类摇滚",
    powerwolfTitle: "Powerwolf",
    powerwolfGenre: "力量金属, 交响金属",
    musicDescription:
      "我听的音乐充满能量、旋律动听且富有启发性，从朋克和摇滚到强力而富有戏剧性的金属。",
    title_experience: "职业经历",
    desc_experience: "对我的职业生涯和技术能力的简要概述。",
    master_title: "网络工程硕士",
    master_institution: "奥维耶多大学 | 2025 - 至今",
    master_desc: "我正在奥维耶多大学计算机工程学院攻读网络工程硕士。",
    mobile_lead_title: "移动产品负责人",
    mobile_lead_company: "Prodity Software S.L.U. | 2022 - 至今",
    mobile_lead_1: "承担移动应用的主要责任",
    mobile_lead_2: "分析、设计并实现客户提出的关键改进和变更",
    mobile_lead_3: "领导视觉重设计项目，优化应用关键界面和流程",
    mobile_lead_4:
      "目前开发一款新的移动应用，用现代React Native技术栈替代旧应用",

    fullstack_title: "全栈开发工程师",
    fullstack_company: "Prodity Software S.L.U. | 2019 - 2022",
    fullstack_1:
      "从事ASP.NET Framework 4.8开发的遗留应用程序，开始我的职业生涯",
    fullstack_2: "扩展了后端开发和Web应用开发经验",
    fullstack_3: "强化了项目管理、团队协作和敏捷方法的技能",

    bachelor_title: "软件工程学士",
    bachelor_institution: "奥维耶多大学 | 2015 - 2020",
    bachelor_desc: "在奥维耶多大学计算机工程学院学习软件工程学士学位。",

    skills_title: "技能",
    skill_fullstack: "全栈",
    skill_frontmobile: "移动前端",
    skill_uiux: "UI/UX设计",
    skill_performance: "优化与性能",
    skill_api: "API集成",
    skill_teamwork: "团队合作与敏捷方法",
    tech_title: "技术",
  },
};

// Recuperar idioma guardado o usar 'es'
const savedLang = localStorage.getItem("language") || "es";
const languageSelect = document.getElementById("language-select");
languageSelect.value = savedLang;
setLanguage(savedLang);

// Cambiar idioma con el select
languageSelect.onchange = () => {
  const lang = languageSelect.value;
  setLanguage(lang);
};

// Función para traducir
function setLanguage(lang) {
  localStorage.setItem("language", lang);
  document.documentElement.lang = lang;

  document.querySelectorAll("[data-i18n]").forEach((el) => {
    const key = el.getAttribute("data-i18n");
    if (translations[lang] && translations[lang][key]) {
      if (el.tagName.toLowerCase() === "title") {
        document.title = translations[lang][key];
      } else if (key.indexOf("Placeholder") != -1) {
        el.placeholder = translations[lang][key];
      } else {
        el.textContent = translations[lang][key];
      }
    }
  });
}

// === Botón de tema ===
const themeButton = document.getElementById("theme-button");
const themeIcon = document.getElementById("theme-icon");
const htmlEl = document.documentElement;

themeButton.onclick = () => {
  const current = htmlEl.className;
  const next = current === "light" ? "dark" : "light";
  htmlEl.setAttribute("class", next);
  themeIcon.src = next === "dark" ? "res/image/sun.png" : "res/image/moon.png";
  localStorage.setItem("theme", next);
};

// Referencia al input de búsqueda
const searchInput = document.querySelector('input[type="text"]');

// Función de highlight de la búsqueda
function highlightSearch(term) {
  // Quitar resaltado previo
  document.querySelectorAll(".highlight").forEach((el) => {
    el.outerHTML = el.innerHTML;
  });

  // No hay término de búsqueda, nada que hacer
  if (!term) return;

  // Buscar en elementos relevantes (elementos en los que hay texto)
  const elements = document.querySelectorAll(
    "h1, h2, h3, h4, p, span, blockquote"
  );
  elements.forEach((el) => {
    // Regex simple de búsqueda de caracteres case insensitive
    const regex = new RegExp(`(${term})`, "gi");
    if (el.textContent.match(regex)) {
      // Reemplazar el texto por un span con el mismo texto y la clase highlight, que lo pinta de un color de acento destacable
      el.innerHTML = el.textContent.replace(
        regex,
        '<span class="highlight">$1</span>'
      );
    }
  });
}

// Buscar mientras escribe, no tenemos botón de búsqueda
searchInput.addEventListener("input", () => {
  highlightSearch(searchInput.value);
});
